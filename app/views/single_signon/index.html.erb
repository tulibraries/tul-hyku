<h1 class='text-center'>Select a Single Sign On Provider</h1>

<% if devise_mapping.omniauthable? %>
  <div class="row justify-content-center">
    <% @identity_providers.each do |ip| %>
      <div class='col-md-3 text-center'>
        <%= button_to omniauth_authorize_path(resource_name, ip.provider, ip.id), form_class: 'button_to', class: 'sso-button btn btn-primary btn-block' do %>
          <div class='<%= ip.provider %>-box'>
            <%= image_tag ip.logo_image.url(:medium), class: "img-fluid", alt: ip.logo_image_text if ip.logo_image? %>
            <br />
            <%= t('.sign_in_with_provider', provider: ip.name) %>
          </div>
          <span class='sso-button-fake btn btn-primary'>Sign In</span>
        <% end %>
      </div>
    <% end %>
  </div>
<% end %>

<% if @identity_providers.count == 1 %>
  <script>
    $('form.button_to').submit();
  </script>
<% end %>
